# DomainDNS - äºŒçº§åŸŸååˆ†å‘ç³»ç»Ÿ

[![Java](https://img.shields.io/badge/Java-21-orange.svg)](https://www.oracle.com/java/)
[![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.1.5-brightgreen.svg)](https://spring.io/projects/spring-boot)
[![Vue.js](https://img.shields.io/badge/Vue.js-3.4.21-4FC08D.svg)](https://vuejs.org/)
[![MySQL](https://img.shields.io/badge/MySQL-8.0+-blue.svg)](https://www.mysql.com/)
[![Redis](https://img.shields.io/badge/Redis-6.0+-red.svg)](https://redis.io/)

ä¸€ä¸ªåŸºäº Spring Boot å’Œ Vue.js çš„ç°ä»£åŒ–äºŒçº§åŸŸååˆ†å‘å¹³å°ï¼Œæ”¯æŒ Cloudflare DNS ç®¡ç†ã€ç§¯åˆ†ç³»ç»Ÿã€é‚€è¯·æœºåˆ¶å’Œå®Œæ•´çš„ç”¨æˆ·ç®¡ç†åŠŸèƒ½ã€‚

è¿™æ˜¯æˆ‘æ­å»ºå¥½çš„åŸŸååˆ†å‘ç½‘ç«™ï¼šhttps://freedns.hyper99.shop/

## âœ¨ ä¸»è¦ç‰¹æ€§

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½
- **äºŒçº§åŸŸåç”³è¯·** - ç”¨æˆ·é€šè¿‡ç§¯åˆ†ç”³è¯·è‡ªå®šä¹‰å­åŸŸå
- **Cloudflare é›†æˆ** - è‡ªåŠ¨åŒæ­¥å’Œç®¡ç† Cloudflare DNS è®°å½•
- **ç§¯åˆ†ç³»ç»Ÿ** - å®Œæ•´çš„ç§¯åˆ†è·å–ã€æ¶ˆè´¹å’Œäº¤æ˜“æœºåˆ¶
- **é‚€è¯·æœºåˆ¶** - ç”¨æˆ·é‚€è¯·å¥–åŠ±å’Œé‚€è¯·ç ç®¡ç†
- **GitHub ä»»åŠ¡** - é€šè¿‡ GitHub Star ä»»åŠ¡è·å–ç§¯åˆ†
- **æ”¯ä»˜å……å€¼** - æ”¯æŒå¤šç§æ”¯ä»˜æ–¹å¼å……å€¼ç§¯åˆ†

### ğŸ”§ ç®¡ç†åŠŸèƒ½
- **å¤šè´¦æˆ·ç®¡ç†** - æ”¯æŒå¤šä¸ª Cloudflare è´¦æˆ·
- **åŸŸåç®¡ç†** - æ‰¹é‡åŒæ­¥å’Œç®¡ç†åŸŸå
- **ç”¨æˆ·ç®¡ç†** - ç”¨æˆ·ä¿¡æ¯ã€ç§¯åˆ†è°ƒæ•´ã€çŠ¶æ€ç®¡ç†
- **ç³»ç»Ÿè®¾ç½®** - çµæ´»çš„é…ç½®ç®¡ç†
- **å®¡è®¡æ—¥å¿—** - å®Œæ•´çš„æ“ä½œè®°å½•å’Œå®¡è®¡
- **æ•°æ®ç»Ÿè®¡** - ä¸°å¯Œçš„ä»ªè¡¨æ¿å’Œæ•°æ®å¯è§†åŒ–

### ğŸ›¡ï¸ å®‰å…¨ç‰¹æ€§
- **JWT è®¤è¯** - å®‰å…¨çš„ç”¨æˆ·è®¤è¯æœºåˆ¶
- **æƒé™æ§åˆ¶** - åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶
- **æ•°æ®åŠ å¯†** - æ•æ„Ÿæ•°æ® AES åŠ å¯†å­˜å‚¨
- **é™æµä¿æŠ¤** - é˜²æ­¢æ¶æ„è¯·æ±‚å’Œæ»¥ç”¨
- **å®¡è®¡è¿½è¸ª** - å®Œæ•´çš„æ“ä½œæ—¥å¿—è®°å½•

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### åç«¯æŠ€æœ¯æ ˆ
- **Java 21** - ç°ä»£ Java ç‰¹æ€§
- **Spring Boot 3.1.5** - ä¼ä¸šçº§åº”ç”¨æ¡†æ¶
- **Spring Security** - å®‰å…¨è®¤è¯å’Œæˆæƒ
- **MyBatis** - æ•°æ®æŒä¹…å±‚æ¡†æ¶
- **MySQL 8.0+** - å…³ç³»å‹æ•°æ®åº“
- **Redis** - ç¼“å­˜å’Œä¼šè¯å­˜å‚¨
- **Spring Mail** - é‚®ä»¶æœåŠ¡
- **JWT** - æ— çŠ¶æ€è®¤è¯

### å‰ç«¯æŠ€æœ¯æ ˆ
- **Vue.js 3** - æ¸è¿›å¼å‰ç«¯æ¡†æ¶
- **Element Plus** - ä¼ä¸šçº§ UI ç»„ä»¶åº“
- **Pinia** - çŠ¶æ€ç®¡ç†
- **Vue Router** - è·¯ç”±ç®¡ç†
- **Vite** - ç°ä»£åŒ–æ„å»ºå·¥å…·
- **Quill** - å¯Œæ–‡æœ¬ç¼–è¾‘å™¨

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

### æœ€ä½è¦æ±‚
- **Java**: 21+
- **Node.js**: 16+
- **MySQL**: 8.0+
- **Redis**: 6.0+
- **å†…å­˜**: 2GB+
- **å­˜å‚¨**: 10GB+

### æ¨èé…ç½®
- **Java**: 21 LTS
- **Node.js**: 18 LTS
- **MySQL**: 8.0+
- **Redis**: 7.0+
- **å†…å­˜**: 4GB+
- **å­˜å‚¨**: 50GB+ SSD

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/your-username/DomainDNS.git
cd DomainDNS
```

### 2. æ•°æ®åº“é…ç½®

åˆ›å»º MySQL æ•°æ®åº“å¹¶å¯¼å…¥è¡¨ç»“æ„ï¼š

```bash
mysql -u root -p
CREATE DATABASE domaindns CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
USE domaindns;
SOURCE backend/db/schema.sql;
```

### 3. åç«¯é…ç½®

#### 3.1 å¤åˆ¶é…ç½®æ–‡ä»¶

```bash
cp backend/src/main/resources/application-dev.yml.template backend/src/main/resources/application-dev.yml
cp backend/src/main/resources/application-prod.yml.template backend/src/main/resources/application-prod.yml
```

#### 3.2 é…ç½®ç¯å¢ƒå˜é‡

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
# æ•°æ®åº“é…ç½®
DB_HOST=localhost
DB_PORT=3306
DB_NAME=domaindns
DB_USER=root
DB_PASSWORD=your_password

# Redis é…ç½®
REDIS_HOST=127.0.0.1
REDIS_PORT=6379
REDIS_PASS=

# JWT é…ç½®
JWT_SECRET=your-very-strong-secret-key-here
JWT_ISSUER=domaindns
JWT_EXPIRE_MINUTES=120

# é‚®ä»¶é…ç½®
MAIL_HOST=smtp.qq.com
MAIL_PORT=587
MAIL_USER=your-email@qq.com
MAIL_PASS=your-email-password

# åŠ å¯†å¯†é’¥
SECRETS_AES_KEY=your-32-char-aes-key-here

# GitHub API
GITHUB_TOKEN=your-github-token
```

#### 3.3 å¯åŠ¨åç«¯æœåŠ¡

```bash
cd backend
mvn clean install
mvn spring-boot:run
```

åç«¯æœåŠ¡å°†åœ¨ `http://localhost:8080` å¯åŠ¨ã€‚

### 4. å‰ç«¯é…ç½®

#### 4.1 å®‰è£…ä¾èµ–

```bash
cd UI
npm install
```

#### 4.2 é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¼€å‘ç¯å¢ƒ
cp env.development .env.development

# ç”Ÿäº§ç¯å¢ƒ
cp env.production .env.production
```

#### 4.3 å¯åŠ¨å‰ç«¯æœåŠ¡

```bash
# å¼€å‘ç¯å¢ƒ
npm run dev

# ç”Ÿäº§ç¯å¢ƒ
npm run dev:prod
```

å‰ç«¯æœåŠ¡å°†åœ¨ `http://localhost:5173` å¯åŠ¨ã€‚

## ğŸ“– ä½¿ç”¨æŒ‡å—

### ç®¡ç†å‘˜æ“ä½œ

1. **æ³¨å†Œç®¡ç†å‘˜è´¦å·**
   - è®¿é—® `/api/auth/admin/register`
   - æˆ–ä½¿ç”¨æ•°æ®åº“ç›´æ¥æ’å…¥ç®¡ç†å‘˜ç”¨æˆ·

2. **é…ç½® Cloudflare è´¦æˆ·**
   - ç™»å½•ç®¡ç†åå°
   - æ·»åŠ  Cloudflare API Key æˆ– Token
   - åŒæ­¥åŸŸååˆ—è¡¨

3. **å¯ç”¨åŸŸååˆ†å‘**
   - é€‰æ‹©è¦ç”¨äºåˆ†å‘çš„åŸŸå
   - å¯ç”¨åŸŸåçŠ¶æ€
   - é…ç½®ç§¯åˆ†ç­–ç•¥

### ç”¨æˆ·æ“ä½œ

1. **ç”¨æˆ·æ³¨å†Œ**
   - è®¿é—®æ³¨å†Œé¡µé¢
   - å¡«å†™ç”¨æˆ·ä¿¡æ¯
   - éªŒè¯é‚®ç®±ï¼ˆå¯é€‰ï¼‰

2. **ç”³è¯·å­åŸŸå**
   - é€‰æ‹©å¯ç”¨åŸŸå
   - è¾“å…¥å­åŸŸåå‰ç¼€
   - é…ç½® DNS è®°å½•
   - æ¶ˆè€—ç§¯åˆ†å®Œæˆç”³è¯·

3. **ç®¡ç†åŸŸå**
   - æŸ¥çœ‹å·²ç”³è¯·çš„åŸŸå
   - é‡Šæ”¾ä¸éœ€è¦çš„åŸŸå
   - æŸ¥çœ‹ç§¯åˆ†ä½™é¢å’Œæµæ°´

## ğŸ”§ é…ç½®è¯´æ˜

### ç³»ç»Ÿè®¾ç½®

ç³»ç»Ÿæ”¯æŒä»¥ä¸‹å¯é…ç½®å‚æ•°ï¼ˆå­˜å‚¨åœ¨ `system_settings` è¡¨ï¼‰ï¼š

| å‚æ•°å | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|--------|------|
| `initial_register_points` | 1 | æ³¨å†Œå¥–åŠ±ç§¯åˆ† |
| `invitee_points` | 3 | è¢«é‚€è¯·è€…å¥–åŠ±ç§¯åˆ† |
| `inviter_points` | 3 | é‚€è¯·è€…å¥–åŠ±ç§¯åˆ† |
| `domain_cost_points` | 5 | ç”³è¯·åŸŸåæ¶ˆè€—ç§¯åˆ† |
| `sync_cron_expression` | `0 */5 * * * *` | åŒæ­¥ä»»åŠ¡æ‰§è¡Œæ—¶é—´ |
| `default_ttl` | 120 | é»˜è®¤ DNS TTL |
| `max_domains_per_user` | 5 | æ¯ç”¨æˆ·æœ€å¤§åŸŸåæ•° |
| `allow_user_set_invite` | true | å…è®¸ç”¨æˆ·è®¾ç½®é‚€è¯·ç  |

### Cloudflare é…ç½®

æ”¯æŒä¸¤ç§è®¤è¯æ–¹å¼ï¼š

1. **Global API Key**
   - éœ€è¦é‚®ç®±å’Œ Global API Key
   - æƒé™è¾ƒé«˜ï¼Œå»ºè®®è°¨æ…ä½¿ç”¨

2. **API Token**
   - æ¨èä½¿ç”¨ï¼Œæƒé™æ›´ç²¾ç»†
   - æ”¯æŒè‡ªå®šä¹‰æƒé™èŒƒå›´

## ğŸ“Š API æ–‡æ¡£

### è®¤è¯æ¥å£

#### ç”¨æˆ·æ³¨å†Œ
```http
POST /api/auth/register
Content-Type: application/json

{
  "username": "testuser",
  "email": "test@example.com",
  "password": "password123",
  "inviteCode": "optional"
}
```

#### ç”¨æˆ·ç™»å½•
```http
POST /api/auth/login
Content-Type: application/json

{
  "username": "testuser",
  "password": "password123"
}
```

### åŸŸåç®¡ç†

#### ç”³è¯·å­åŸŸå
```http
POST /api/user/domains/apply
Authorization: Bearer <token>
Content-Type: application/json

{
  "zoneId": 1,
  "prefix": "mysite",
  "type": "A",
  "value": "1.2.3.4",
  "ttl": 120,
  "remark": "æˆ‘çš„ç½‘ç«™"
}
```

#### è·å–æˆ‘çš„åŸŸå
```http
GET /api/user/domains?page=1&size=20
Authorization: Bearer <token>
```

### ç®¡ç†å‘˜æ¥å£

#### åŒæ­¥åŸŸå
```http
POST /api/admin/zones/sync
Authorization: Bearer <admin-token>
Content-Type: application/json

{
  "cfAccountId": 1
}
```

#### å¯ç”¨åŸŸå
```http
POST /api/admin/zones/{id}/enable
Authorization: Bearer <admin-token>
```

## ğŸ³ Docker éƒ¨ç½²

### ä½¿ç”¨ Docker Compose

```yaml
version: '3.8'
services:
  mysql:
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: rootpassword
      MYSQL_DATABASE: domaindns
    ports:
      - "3306:3306"
    volumes:
      - mysql_data:/var/lib/mysql

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"

  backend:
    build: ./backend
    ports:
      - "8080:8080"
    environment:
      - DB_HOST=mysql
      - REDIS_HOST=redis
    depends_on:
      - mysql
      - redis

  frontend:
    build: ./UI
    ports:
      - "80:80"
    depends_on:
      - backend

volumes:
  mysql_data:
```

å¯åŠ¨æœåŠ¡ï¼š

```bash
docker-compose up -d
```

## ğŸ” ç›‘æ§å’Œæ—¥å¿—

### å¥åº·æ£€æŸ¥

ç³»ç»Ÿæä¾›ä»¥ä¸‹ç›‘æ§ç«¯ç‚¹ï¼š

- `GET /actuator/health` - åº”ç”¨å¥åº·çŠ¶æ€
- `GET /actuator/info` - åº”ç”¨ä¿¡æ¯
- `GET /actuator/metrics` - åº”ç”¨æŒ‡æ ‡

### æ—¥å¿—é…ç½®

æ—¥å¿—æ–‡ä»¶ä½ç½®ï¼š
- åº”ç”¨æ—¥å¿—ï¼š`logs/application.log`
- é”™è¯¯æ—¥å¿—ï¼š`logs/error.log`
- å®¡è®¡æ—¥å¿—ï¼šæ•°æ®åº“ `audit_logs` è¡¨

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“ å¼€å‘è®¡åˆ’

- [ ] æ”¯æŒæ›´å¤š DNS æä¾›å•†ï¼ˆé˜¿é‡Œäº‘ã€è…¾è®¯äº‘ç­‰ï¼‰
- [ ] å¢åŠ åŸŸåè‡ªåŠ¨ç»­æœŸåŠŸèƒ½
- [ ] æ”¯æŒæ‰¹é‡åŸŸåæ“ä½œ
- [ ] å¢åŠ æ›´å¤šæ”¯ä»˜æ–¹å¼
- [ ] æ”¯æŒåŸŸåè½¬ç§»åŠŸèƒ½
- [ ] å¢åŠ  API é™æµå’Œç›‘æ§
- [ ] æ”¯æŒå¤šè¯­è¨€å›½é™…åŒ–

## ğŸ› é—®é¢˜åé¦ˆ

å¦‚æœæ‚¨é‡åˆ°é—®é¢˜æˆ–æœ‰å»ºè®®ï¼Œè¯·ï¼š

1. æŸ¥çœ‹ [Issues](https://github.com/your-username/DomainDNS/issues) æ˜¯å¦å·²æœ‰ç›¸å…³é—®é¢˜
2. åˆ›å»ºæ–°çš„ Issue å¹¶è¯¦ç»†æè¿°é—®é¢˜
3. æä¾›å¤ç°æ­¥éª¤å’Œç¯å¢ƒä¿¡æ¯

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT è®¸å¯è¯](LICENSE)ã€‚

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®çš„æ”¯æŒï¼š

- [Spring Boot](https://spring.io/projects/spring-boot)
- [Vue.js](https://vuejs.org/)
- [Element Plus](https://element-plus.org/)
- [MyBatis](https://mybatis.org/)
- [Cloudflare API](https://api.cloudflare.com/)

---

**æ³¨æ„**: è¯·åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä¿®æ”¹æ‰€æœ‰é»˜è®¤å¯†ç å’Œå¯†é’¥ï¼Œå¹¶ç¡®ä¿æ•°æ®åº“å’Œ Redis çš„å®‰å…¨é…ç½®ã€‚

## Star History

[![Star History Chart](https://api.star-history.com/svg?repos=970thunder/HyFreeDom&type=date&legend=top-left)](https://www.star-history.com/#970thunder/HyFreeDom&type=date&legend=top-left)
